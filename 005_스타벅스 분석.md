# 005_스타벅스 분석
## 5.1. 데이터 수집
### 5.1.1. 크롤링을 통한 서울시 스타벅스 매장 목록 데이터 생성


```python
import pandas as pd
import numpy as np

import time

from selenium import webdriver
from selenium.webdriver.chrome.service import Service
from bs4 import BeautifulSoup
from selenium.webdriver.common.by import By
```


```python
ser=Service('../chromedriver/chromedriver.exe')
driver=webdriver.Chrome(service=ser)
url='https://www.starbucks.co.kr/store/store_map.do'
driver.get(url)
time.sleep(3)
```

#### 5.1.1.+ 웹드라이버로 '서울','전체' 버튼 클릭(여기선 무쓸모)


```python
seoul_btn="#container > div > form > fieldset > div > section > article.find_store_cont > article > article:nth-child(4) > div.loca_step1 > div.loca_step1_cont > ul > li:nth-child(1) > a"
driver.find_element(By.CSS_SELECTOR, seoul_btn).click()
```


```python
all_btn="#mCSB_2_container > ul > li:nth-child(1) > a"
driver.find_element(By.CSS_SELECTOR, all_btn).click()
time.sleep(2)
```


```python
soup=BeautifulSoup(driver.page_source,'html.parser')
```


```python
cafes=soup.select('ul.quickSearchResultBoxSidoGugun > li.quickResultLstCon')
print(len(cafes))
```

    568


#### 5.1.1.1. 첫 매장의 정보


```python
starbucks_store=cafes[0]
starbucks_store
```




    <li class="quickResultLstCon" data-code="3762" data-hlytag="null" data-index="0" data-lat="37.501087" data-long="127.043069" data-name="역삼아레나빌딩" data-storecd="1509" style="background:#fff"> <strong data-my_siren_order_store_yn="N" data-name="역삼아레나빌딩" data-store="1509" data-yn="N">역삼아레나빌딩  </strong> <p class="result_details">서울특별시 강남구 언주로 425 (역삼동)<br/>1522-3232</p> <i class="pin_general">리저브 매장 2번</i></li>




```python
name=starbucks_store.select('strong')[0].text.strip()
lat=starbucks_store['data-lat'].strip()
lng=starbucks_store['data-long'].strip()
store_type=starbucks_store.select('i')[0]['class'][0][4:]
address=str(starbucks_store.select('p')[0]).split('<br/>')[0].split('>')[1]
tel=str(starbucks_store.select('p')[0]).split('<br/>')[1].split('<')[0]
```

#### 5.1.1.2. 여러 매장의 정보


```python
list=[]
rank=1
cafes=soup.select('ul.quickSearchResultBoxSidoGugun > li.quickResultLstCon')
for starbucks_store in cafes:
    name=starbucks_store.select('strong')[0].text.strip()
    lat=starbucks_store['data-lat'].strip()
    lng=starbucks_store['data-long'].strip()
    store_type=starbucks_store.select('i')[0]['class'][0][4:]
    address=str(starbucks_store.select('p')[0]).split('<br/>')[0].split('>')[1]
    tel=str(starbucks_store.select('p')[0]).split('<br/>')[1].split('<')[0]
    list.append([name,lat,lng,store_type, address, tel])
    rank+=1

seoul_starbucks_df=pd.DataFrame(list,columns=['매장명','위도','경도','매장타입','주소','전화번호'])
seoul_starbucks_df.head()
```




<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }
    
    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>매장명</th>
      <th>위도</th>
      <th>경도</th>
      <th>매장타입</th>
      <th>주소</th>
      <th>전화번호</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>역삼아레나빌딩</td>
      <td>37.501087</td>
      <td>127.043069</td>
      <td>general</td>
      <td>서울특별시 강남구 언주로 425 (역삼동)</td>
      <td>1522-3232</td>
    </tr>
    <tr>
      <th>1</th>
      <td>논현역사거리</td>
      <td>37.510178</td>
      <td>127.022223</td>
      <td>general</td>
      <td>서울특별시 강남구 강남대로 538 (논현동)</td>
      <td>1522-3232</td>
    </tr>
    <tr>
      <th>2</th>
      <td>신사역성일빌딩</td>
      <td>37.514132</td>
      <td>127.020563</td>
      <td>general</td>
      <td>서울특별시 강남구 강남대로 584 (논현동)</td>
      <td>1522-3232</td>
    </tr>
    <tr>
      <th>3</th>
      <td>국기원사거리</td>
      <td>37.499517</td>
      <td>127.031495</td>
      <td>general</td>
      <td>서울특별시 강남구 테헤란로 125 (역삼동)</td>
      <td>1522-3232</td>
    </tr>
    <tr>
      <th>4</th>
      <td>대치재경빌딩R</td>
      <td>37.494668</td>
      <td>127.062583</td>
      <td>reserve</td>
      <td>서울특별시 강남구 남부순환로 2947 (대치동)</td>
      <td>1522-3232</td>
    </tr>
  </tbody>
</table>
</div>



#### 5.1.1.3. 데이터프레임 요역 정보확인


```python
seoul_starbucks_df.info()
```

    <class 'pandas.core.frame.DataFrame'>
    RangeIndex: 568 entries, 0 to 567
    Data columns (total 6 columns):
     #   Column  Non-Null Count  Dtype 
    ---  ------  --------------  ----- 
     0   매장명     568 non-null    object
     1   위도      568 non-null    object
     2   경도      568 non-null    object
     3   매장타입    568 non-null    object
     4   주소      568 non-null    object
     5   전화번호    568 non-null    object
    dtypes: object(6)
    memory usage: 26.8+ KB


#### 5.1.1.4. 엑셀로 저장


```python
seoul_starbucks_df.to_excel("./files/seoul_starbucks_list_class.xlsx", index=False)
```

### 5.1.2. 서울열린데이터광장의 OPEN API 활용 정보 수집
#### 5.1.2.1. 인증키 발급

- [나의화면]-[인증키 신청]-[일반키신청]-사용자 url에 http:// 입력 - 신청
- [나의 화면]-[인증키 관리]
#### 5.1.2.2. OPEN API 활용 연습


```python
import requests
```


```python
SEOUL_API_AUTH_KEY='******************************'
Open_API='GangseoListLoanCompany'
url = 'http://openAPI.seoul.go.kr:8088/{}/json/{}/1/5/'.format(SEOUL_API_AUTH_KEY,Open_API)

```


```python
result_dict=requests.get(url).json()
result_dict
```




    {'GangseoListLoanCompany': {'list_total_count': 1104,
      'RESULT': {'CODE': 'INFO-000', 'MESSAGE': '정상 처리되었습니다'},
      'row': [{'BSNS_SE': '대부중개업',
        'MNG_STATE_CODE': '폐업',
        'OLD_APV_NO': '2015-서울강서-00033(대부중개업)',
        'BUP_NM': '주식회사 론마음파트너스대부중개',
        'REP_NM': '김진영',
        'UPCHE_GBN': '법인',
        'WRKR_BUP_TELNO': '02-521-1012',
        'WRKR_BUP_ADDR': '서울특별시 강서구 등촌동  696번지  세신그린코아빌딩',
        'WRKR_RD_FULL_ADDR': '서울특별시 강서구 공항대로41길 51, 세신그린코아빌딩 9층 905호 (등촌동)',
        'WRKR_BUP_POST_NO': '',
        'APV_YMD': '20210712',
        'END_APV_YMD': '20240712',
        'LAST_CLS_YMD': '20220117',
        'WRKR_ESBMNT_YMD': '20150924',
        'HOFF_YN': '본점',
        'LAST_MOD_YMD': '20220118'},
       {'BSNS_SE': '대부업',
        'MNG_STATE_CODE': '폐업',
        'OLD_APV_NO': '2020-서울강서-0033(대부업)',
        'BUP_NM': '선유대부',
        'REP_NM': '김준영',
        'UPCHE_GBN': '개인',
        'WRKR_BUP_TELNO': '',
        'WRKR_BUP_ADDR': '서울특별시 강서구 가양동  14번지 51호  토피아빌딩',
        'WRKR_RD_FULL_ADDR': '서울특별시 강서구 화곡로 429, 토피아빌딩 4층 402-10호 (가양동)',
        'WRKR_BUP_POST_NO': '',
        'APV_YMD': '20201106',
        'END_APV_YMD': '20231106',
        'LAST_CLS_YMD': '20220117',
        'WRKR_ESBMNT_YMD': '20201106',
        'HOFF_YN': '본점',
        'LAST_MOD_YMD': '20220118'},
       {'BSNS_SE': '대부중개업',
        'MNG_STATE_CODE': '영업중',
        'OLD_APV_NO': '2021-서울강서-0036(대부중개업)',
        'BUP_NM': 'EU대부중개',
        'REP_NM': '최영우',
        'UPCHE_GBN': '개인',
        'WRKR_BUP_TELNO': '',
        'WRKR_BUP_ADDR': '서울특별시 강서구 마곡동  798번지 17호  ',
        'WRKR_RD_FULL_ADDR': '서울특별시 강서구 마곡중앙1로 10, 8층 801~810호 A31호 (마곡동)',
        'WRKR_BUP_POST_NO': '',
        'APV_YMD': '20210817',
        'END_APV_YMD': '20240817',
        'LAST_CLS_YMD': '',
        'WRKR_ESBMNT_YMD': '20210817',
        'HOFF_YN': '본점',
        'LAST_MOD_YMD': '20220105'},
       {'BSNS_SE': '대부중개업',
        'MNG_STATE_CODE': '폐업',
        'OLD_APV_NO': '2021-서울강서-0014(대부중개업)',
        'BUP_NM': '와이앤제이컨설팅 대부중개',
        'REP_NM': '윤효선',
        'UPCHE_GBN': '개인',
        'WRKR_BUP_TELNO': '',
        'WRKR_BUP_ADDR': '서울특별시 강서구 마곡동  774번지 1호  ',
        'WRKR_RD_FULL_ADDR': '서울특별시 강서구 공항대로 209, 618호 (마곡동)',
        'WRKR_BUP_POST_NO': '',
        'APV_YMD': '20210318',
        'END_APV_YMD': '20240318',
        'LAST_CLS_YMD': '20220104',
        'WRKR_ESBMNT_YMD': '20210318',
        'HOFF_YN': '본점',
        'LAST_MOD_YMD': '20220104'},
       {'BSNS_SE': '대부업',
        'MNG_STATE_CODE': '영업중',
        'OLD_APV_NO': '2021-서울강서-0053(대부업)',
        'BUP_NM': '꽃길대부',
        'REP_NM': '김정근',
        'UPCHE_GBN': '개인',
        'WRKR_BUP_TELNO': '',
        'WRKR_BUP_ADDR': '서울특별시 강서구 공항동  60번지 118호  대성빌딩',
        'WRKR_RD_FULL_ADDR': '서울특별시 강서구 송정로 51, 대성빌딩 4층 402-5호 (공항동)',
        'WRKR_BUP_POST_NO': '',
        'APV_YMD': '20211224',
        'END_APV_YMD': '20241224',
        'LAST_CLS_YMD': '',
        'WRKR_ESBMNT_YMD': '20211224',
        'HOFF_YN': '본점',
        'LAST_MOD_YMD': '20211224'}]}}




```python
sample_df = pd.DataFrame(result_dict['GangseoListLoanCompany']['row'])
sample_df
```




<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }
    
    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>BSNS_SE</th>
      <th>MNG_STATE_CODE</th>
      <th>OLD_APV_NO</th>
      <th>BUP_NM</th>
      <th>REP_NM</th>
      <th>UPCHE_GBN</th>
      <th>WRKR_BUP_TELNO</th>
      <th>WRKR_BUP_ADDR</th>
      <th>WRKR_RD_FULL_ADDR</th>
      <th>WRKR_BUP_POST_NO</th>
      <th>APV_YMD</th>
      <th>END_APV_YMD</th>
      <th>LAST_CLS_YMD</th>
      <th>WRKR_ESBMNT_YMD</th>
      <th>HOFF_YN</th>
      <th>LAST_MOD_YMD</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>대부중개업</td>
      <td>폐업</td>
      <td>2015-서울강서-00033(대부중개업)</td>
      <td>주식회사 론마음파트너스대부중개</td>
      <td>김진영</td>
      <td>법인</td>
      <td>02-521-1012</td>
      <td>서울특별시 강서구 등촌동  696번지  세신그린코아빌딩</td>
      <td>서울특별시 강서구 공항대로41길 51, 세신그린코아빌딩 9층 905호 (등촌동)</td>
      <td></td>
      <td>20210712</td>
      <td>20240712</td>
      <td>20220117</td>
      <td>20150924</td>
      <td>본점</td>
      <td>20220118</td>
    </tr>
    <tr>
      <th>1</th>
      <td>대부업</td>
      <td>폐업</td>
      <td>2020-서울강서-0033(대부업)</td>
      <td>선유대부</td>
      <td>김준영</td>
      <td>개인</td>
      <td></td>
      <td>서울특별시 강서구 가양동  14번지 51호  토피아빌딩</td>
      <td>서울특별시 강서구 화곡로 429, 토피아빌딩 4층 402-10호 (가양동)</td>
      <td></td>
      <td>20201106</td>
      <td>20231106</td>
      <td>20220117</td>
      <td>20201106</td>
      <td>본점</td>
      <td>20220118</td>
    </tr>
    <tr>
      <th>2</th>
      <td>대부중개업</td>
      <td>영업중</td>
      <td>2021-서울강서-0036(대부중개업)</td>
      <td>EU대부중개</td>
      <td>최영우</td>
      <td>개인</td>
      <td></td>
      <td>서울특별시 강서구 마곡동  798번지 17호</td>
      <td>서울특별시 강서구 마곡중앙1로 10, 8층 801~810호 A31호 (마곡동)</td>
      <td></td>
      <td>20210817</td>
      <td>20240817</td>
      <td></td>
      <td>20210817</td>
      <td>본점</td>
      <td>20220105</td>
    </tr>
    <tr>
      <th>3</th>
      <td>대부중개업</td>
      <td>폐업</td>
      <td>2021-서울강서-0014(대부중개업)</td>
      <td>와이앤제이컨설팅 대부중개</td>
      <td>윤효선</td>
      <td>개인</td>
      <td></td>
      <td>서울특별시 강서구 마곡동  774번지 1호</td>
      <td>서울특별시 강서구 공항대로 209, 618호 (마곡동)</td>
      <td></td>
      <td>20210318</td>
      <td>20240318</td>
      <td>20220104</td>
      <td>20210318</td>
      <td>본점</td>
      <td>20220104</td>
    </tr>
    <tr>
      <th>4</th>
      <td>대부업</td>
      <td>영업중</td>
      <td>2021-서울강서-0053(대부업)</td>
      <td>꽃길대부</td>
      <td>김정근</td>
      <td>개인</td>
      <td></td>
      <td>서울특별시 강서구 공항동  60번지 118호  대성빌딩</td>
      <td>서울특별시 강서구 송정로 51, 대성빌딩 4층 402-5호 (공항동)</td>
      <td></td>
      <td>20211224</td>
      <td>20241224</td>
      <td></td>
      <td>20211224</td>
      <td>본점</td>
      <td>20211224</td>
    </tr>
  </tbody>
</table>
</div>



#### 5.1.2.3. 서울시 시군구 목록 데이터
##### 5.1.2.3.1. 자료(현재없기에 파일로) 


```python
sgg_pop_df=pd.read_csv('./files/report.txt', header=2,sep='\t')
sgg_pop_df.head()
```




<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }
    
    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>기간</th>
      <th>자치구</th>
      <th>세대</th>
      <th>계</th>
      <th>남자</th>
      <th>여자</th>
      <th>계.1</th>
      <th>남자.1</th>
      <th>여자.1</th>
      <th>계.2</th>
      <th>남자.2</th>
      <th>여자.2</th>
      <th>세대당인구</th>
      <th>65세이상고령자</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>2020.3/4</td>
      <td>합계</td>
      <td>4,405,833</td>
      <td>9,953,009</td>
      <td>4,840,912</td>
      <td>5,112,097</td>
      <td>9,699,232</td>
      <td>4,719,170</td>
      <td>4,980,062</td>
      <td>253,777</td>
      <td>121,742</td>
      <td>132,035</td>
      <td>2.20</td>
      <td>1,552,356</td>
    </tr>
    <tr>
      <th>1</th>
      <td>2020.3/4</td>
      <td>종로구</td>
      <td>74,861</td>
      <td>159,842</td>
      <td>77,391</td>
      <td>82,451</td>
      <td>149,952</td>
      <td>73,024</td>
      <td>76,928</td>
      <td>9,890</td>
      <td>4,367</td>
      <td>5,523</td>
      <td>2.00</td>
      <td>28,396</td>
    </tr>
    <tr>
      <th>2</th>
      <td>2020.3/4</td>
      <td>중구</td>
      <td>63,594</td>
      <td>135,321</td>
      <td>66,193</td>
      <td>69,128</td>
      <td>125,800</td>
      <td>61,526</td>
      <td>64,274</td>
      <td>9,521</td>
      <td>4,667</td>
      <td>4,854</td>
      <td>1.98</td>
      <td>24,265</td>
    </tr>
    <tr>
      <th>3</th>
      <td>2020.3/4</td>
      <td>용산구</td>
      <td>112,451</td>
      <td>244,953</td>
      <td>119,074</td>
      <td>125,879</td>
      <td>229,786</td>
      <td>110,604</td>
      <td>119,182</td>
      <td>15,167</td>
      <td>8,470</td>
      <td>6,697</td>
      <td>2.04</td>
      <td>39,995</td>
    </tr>
    <tr>
      <th>4</th>
      <td>2020.3/4</td>
      <td>성동구</td>
      <td>136,096</td>
      <td>302,695</td>
      <td>147,582</td>
      <td>155,113</td>
      <td>295,591</td>
      <td>144,444</td>
      <td>151,147</td>
      <td>7,104</td>
      <td>3,138</td>
      <td>3,966</td>
      <td>2.17</td>
      <td>45,372</td>
    </tr>
  </tbody>
</table>
</div>



##### 5.1.2.3.2. API하는 법


```python
SEOUL_API_AUTH_KEY='******************'
def seoul_open_api_data(url, service):
    data_list=None
    try:
        result_dict=requests.get(url).json()
        result_data=result_dict[service]
        code=result_data['RESULT']['CODE']
        if code =='INFO-000':
            data_list=result_data['row']
    except:
       pass
    return(data_list)
```

#### 5.1.2.4. 서울시 시군구별 인구 데이터 가져오기


```python
sgg_pop_df = pd.read_csv('./files/report.txt', header = 2, sep = '\t')
columns = {
    '기간': 'GIGAN',
    '자치구': 'JACHIGU',
    '계': 'GYE_1',
    '계.1': 'GYE_2',
    '계.2': 'GYE_3',
    '남자': 'NAMJA_1',
    '남자.1': 'NAMJA_2',
    '남자.2': 'NAMJA_3',
    '여자': 'YEOJA_1',
    '여자.1': 'YEOJA_2',
    '여자.2': 'YEOJA_3',
    '세대': 'SEDAE',
    '세대당인구': 'SEDAEDANGINGU',
    '65세이상고령자': 'N_65SEISANGGORYEONGJA'
}
sgg_pop_df.rename(columns = columns, inplace = True)
sgg_pop_df
```




<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }
    
    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>GIGAN</th>
      <th>JACHIGU</th>
      <th>SEDAE</th>
      <th>GYE_1</th>
      <th>NAMJA_1</th>
      <th>YEOJA_1</th>
      <th>GYE_2</th>
      <th>NAMJA_2</th>
      <th>YEOJA_2</th>
      <th>GYE_3</th>
      <th>NAMJA_3</th>
      <th>YEOJA_3</th>
      <th>SEDAEDANGINGU</th>
      <th>N_65SEISANGGORYEONGJA</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>2020.3/4</td>
      <td>합계</td>
      <td>4,405,833</td>
      <td>9,953,009</td>
      <td>4,840,912</td>
      <td>5,112,097</td>
      <td>9,699,232</td>
      <td>4,719,170</td>
      <td>4,980,062</td>
      <td>253,777</td>
      <td>121,742</td>
      <td>132,035</td>
      <td>2.20</td>
      <td>1,552,356</td>
    </tr>
    <tr>
      <th>1</th>
      <td>2020.3/4</td>
      <td>종로구</td>
      <td>74,861</td>
      <td>159,842</td>
      <td>77,391</td>
      <td>82,451</td>
      <td>149,952</td>
      <td>73,024</td>
      <td>76,928</td>
      <td>9,890</td>
      <td>4,367</td>
      <td>5,523</td>
      <td>2.00</td>
      <td>28,396</td>
    </tr>
    <tr>
      <th>2</th>
      <td>2020.3/4</td>
      <td>중구</td>
      <td>63,594</td>
      <td>135,321</td>
      <td>66,193</td>
      <td>69,128</td>
      <td>125,800</td>
      <td>61,526</td>
      <td>64,274</td>
      <td>9,521</td>
      <td>4,667</td>
      <td>4,854</td>
      <td>1.98</td>
      <td>24,265</td>
    </tr>
    <tr>
      <th>3</th>
      <td>2020.3/4</td>
      <td>용산구</td>
      <td>112,451</td>
      <td>244,953</td>
      <td>119,074</td>
      <td>125,879</td>
      <td>229,786</td>
      <td>110,604</td>
      <td>119,182</td>
      <td>15,167</td>
      <td>8,470</td>
      <td>6,697</td>
      <td>2.04</td>
      <td>39,995</td>
    </tr>
    <tr>
      <th>4</th>
      <td>2020.3/4</td>
      <td>성동구</td>
      <td>136,096</td>
      <td>302,695</td>
      <td>147,582</td>
      <td>155,113</td>
      <td>295,591</td>
      <td>144,444</td>
      <td>151,147</td>
      <td>7,104</td>
      <td>3,138</td>
      <td>3,966</td>
      <td>2.17</td>
      <td>45,372</td>
    </tr>
    <tr>
      <th>5</th>
      <td>2020.3/4</td>
      <td>광진구</td>
      <td>166,857</td>
      <td>361,923</td>
      <td>174,077</td>
      <td>187,846</td>
      <td>348,064</td>
      <td>168,095</td>
      <td>179,969</td>
      <td>13,859</td>
      <td>5,982</td>
      <td>7,877</td>
      <td>2.09</td>
      <td>50,047</td>
    </tr>
    <tr>
      <th>6</th>
      <td>2020.3/4</td>
      <td>동대문구</td>
      <td>167,232</td>
      <td>358,679</td>
      <td>176,433</td>
      <td>182,246</td>
      <td>344,416</td>
      <td>170,748</td>
      <td>173,668</td>
      <td>14,263</td>
      <td>5,685</td>
      <td>8,578</td>
      <td>2.06</td>
      <td>61,408</td>
    </tr>
    <tr>
      <th>7</th>
      <td>2020.3/4</td>
      <td>중랑구</td>
      <td>185,109</td>
      <td>400,989</td>
      <td>198,012</td>
      <td>202,977</td>
      <td>395,997</td>
      <td>195,981</td>
      <td>200,016</td>
      <td>4,992</td>
      <td>2,031</td>
      <td>2,961</td>
      <td>2.14</td>
      <td>68,658</td>
    </tr>
    <tr>
      <th>8</th>
      <td>2020.3/4</td>
      <td>성북구</td>
      <td>195,379</td>
      <td>449,871</td>
      <td>216,155</td>
      <td>233,716</td>
      <td>439,719</td>
      <td>212,151</td>
      <td>227,568</td>
      <td>10,152</td>
      <td>4,004</td>
      <td>6,148</td>
      <td>2.25</td>
      <td>73,370</td>
    </tr>
    <tr>
      <th>9</th>
      <td>2020.3/4</td>
      <td>강북구</td>
      <td>145,790</td>
      <td>313,550</td>
      <td>152,458</td>
      <td>161,092</td>
      <td>309,996</td>
      <td>151,117</td>
      <td>158,879</td>
      <td>3,554</td>
      <td>1,341</td>
      <td>2,213</td>
      <td>2.13</td>
      <td>62,951</td>
    </tr>
    <tr>
      <th>10</th>
      <td>2020.3/4</td>
      <td>도봉구</td>
      <td>139,029</td>
      <td>329,300</td>
      <td>160,526</td>
      <td>168,774</td>
      <td>327,248</td>
      <td>159,723</td>
      <td>167,525</td>
      <td>2,052</td>
      <td>803</td>
      <td>1,249</td>
      <td>2.35</td>
      <td>61,388</td>
    </tr>
    <tr>
      <th>11</th>
      <td>2020.3/4</td>
      <td>노원구</td>
      <td>218,002</td>
      <td>529,532</td>
      <td>255,618</td>
      <td>273,914</td>
      <td>525,486</td>
      <td>253,797</td>
      <td>271,689</td>
      <td>4,046</td>
      <td>1,821</td>
      <td>2,225</td>
      <td>2.41</td>
      <td>84,612</td>
    </tr>
    <tr>
      <th>12</th>
      <td>2020.3/4</td>
      <td>은평구</td>
      <td>213,039</td>
      <td>485,842</td>
      <td>233,104</td>
      <td>252,738</td>
      <td>481,546</td>
      <td>231,364</td>
      <td>250,182</td>
      <td>4,296</td>
      <td>1,740</td>
      <td>2,556</td>
      <td>2.26</td>
      <td>84,353</td>
    </tr>
    <tr>
      <th>13</th>
      <td>2020.3/4</td>
      <td>서대문구</td>
      <td>144,494</td>
      <td>323,860</td>
      <td>153,763</td>
      <td>170,097</td>
      <td>313,212</td>
      <td>149,993</td>
      <td>163,219</td>
      <td>10,648</td>
      <td>3,770</td>
      <td>6,878</td>
      <td>2.17</td>
      <td>53,869</td>
    </tr>
    <tr>
      <th>14</th>
      <td>2020.3/4</td>
      <td>마포구</td>
      <td>178,495</td>
      <td>383,494</td>
      <td>179,899</td>
      <td>203,595</td>
      <td>373,508</td>
      <td>176,011</td>
      <td>197,497</td>
      <td>9,986</td>
      <td>3,888</td>
      <td>6,098</td>
      <td>2.09</td>
      <td>54,053</td>
    </tr>
    <tr>
      <th>15</th>
      <td>2020.3/4</td>
      <td>양천구</td>
      <td>180,309</td>
      <td>460,048</td>
      <td>225,596</td>
      <td>234,452</td>
      <td>456,240</td>
      <td>223,889</td>
      <td>232,351</td>
      <td>3,808</td>
      <td>1,707</td>
      <td>2,101</td>
      <td>2.53</td>
      <td>64,804</td>
    </tr>
    <tr>
      <th>16</th>
      <td>2020.3/4</td>
      <td>강서구</td>
      <td>266,366</td>
      <td>589,536</td>
      <td>284,747</td>
      <td>304,789</td>
      <td>583,544</td>
      <td>281,951</td>
      <td>301,593</td>
      <td>5,992</td>
      <td>2,796</td>
      <td>3,196</td>
      <td>2.19</td>
      <td>88,052</td>
    </tr>
    <tr>
      <th>17</th>
      <td>2020.3/4</td>
      <td>구로구</td>
      <td>179,792</td>
      <td>435,751</td>
      <td>217,380</td>
      <td>218,371</td>
      <td>405,579</td>
      <td>200,268</td>
      <td>205,311</td>
      <td>30,172</td>
      <td>17,112</td>
      <td>13,060</td>
      <td>2.26</td>
      <td>69,312</td>
    </tr>
    <tr>
      <th>18</th>
      <td>2020.3/4</td>
      <td>금천구</td>
      <td>113,887</td>
      <td>249,641</td>
      <td>127,292</td>
      <td>122,349</td>
      <td>232,157</td>
      <td>117,489</td>
      <td>114,668</td>
      <td>17,484</td>
      <td>9,803</td>
      <td>7,681</td>
      <td>2.04</td>
      <td>39,361</td>
    </tr>
    <tr>
      <th>19</th>
      <td>2020.3/4</td>
      <td>영등포구</td>
      <td>182,087</td>
      <td>405,982</td>
      <td>202,624</td>
      <td>203,358</td>
      <td>375,630</td>
      <td>185,800</td>
      <td>189,830</td>
      <td>30,352</td>
      <td>16,824</td>
      <td>13,528</td>
      <td>2.06</td>
      <td>60,826</td>
    </tr>
    <tr>
      <th>20</th>
      <td>2020.3/4</td>
      <td>동작구</td>
      <td>184,193</td>
      <td>404,617</td>
      <td>195,373</td>
      <td>209,244</td>
      <td>393,554</td>
      <td>190,422</td>
      <td>203,132</td>
      <td>11,063</td>
      <td>4,951</td>
      <td>6,112</td>
      <td>2.14</td>
      <td>64,674</td>
    </tr>
    <tr>
      <th>21</th>
      <td>2020.3/4</td>
      <td>관악구</td>
      <td>275,248</td>
      <td>514,555</td>
      <td>257,638</td>
      <td>256,917</td>
      <td>498,574</td>
      <td>250,084</td>
      <td>248,490</td>
      <td>15,981</td>
      <td>7,554</td>
      <td>8,427</td>
      <td>1.81</td>
      <td>78,206</td>
    </tr>
    <tr>
      <th>22</th>
      <td>2020.3/4</td>
      <td>서초구</td>
      <td>173,483</td>
      <td>429,995</td>
      <td>205,671</td>
      <td>224,324</td>
      <td>426,009</td>
      <td>203,686</td>
      <td>222,323</td>
      <td>3,986</td>
      <td>1,985</td>
      <td>2,001</td>
      <td>2.46</td>
      <td>59,495</td>
    </tr>
    <tr>
      <th>23</th>
      <td>2020.3/4</td>
      <td>강남구</td>
      <td>234,021</td>
      <td>544,085</td>
      <td>260,358</td>
      <td>283,727</td>
      <td>539,235</td>
      <td>257,961</td>
      <td>281,274</td>
      <td>4,850</td>
      <td>2,397</td>
      <td>2,453</td>
      <td>2.30</td>
      <td>73,942</td>
    </tr>
    <tr>
      <th>24</th>
      <td>2020.3/4</td>
      <td>송파구</td>
      <td>281,417</td>
      <td>676,673</td>
      <td>326,602</td>
      <td>350,071</td>
      <td>670,331</td>
      <td>323,646</td>
      <td>346,685</td>
      <td>6,342</td>
      <td>2,956</td>
      <td>3,386</td>
      <td>2.38</td>
      <td>92,149</td>
    </tr>
    <tr>
      <th>25</th>
      <td>2020.3/4</td>
      <td>강동구</td>
      <td>194,602</td>
      <td>462,275</td>
      <td>227,346</td>
      <td>234,929</td>
      <td>458,058</td>
      <td>225,396</td>
      <td>232,662</td>
      <td>4,217</td>
      <td>1,950</td>
      <td>2,267</td>
      <td>2.35</td>
      <td>68,798</td>
    </tr>
  </tbody>
</table>
</div>




```python
sgg_pop_df.info()
sgg_pop_df['JACHIGU'].head()
```

    <class 'pandas.core.frame.DataFrame'>
    RangeIndex: 26 entries, 0 to 25
    Data columns (total 14 columns):
     #   Column                 Non-Null Count  Dtype  
    ---  ------                 --------------  -----  
     0   GIGAN                  26 non-null     object 
     1   JACHIGU                26 non-null     object 
     2   SEDAE                  26 non-null     object 
     3   GYE_1                  26 non-null     object 
     4   NAMJA_1                26 non-null     object 
     5   YEOJA_1                26 non-null     object 
     6   GYE_2                  26 non-null     object 
     7   NAMJA_2                26 non-null     object 
     8   YEOJA_2                26 non-null     object 
     9   GYE_3                  26 non-null     object 
     10  NAMJA_3                26 non-null     object 
     11  YEOJA_3                26 non-null     object 
     12  SEDAEDANGINGU          26 non-null     float64
     13  N_65SEISANGGORYEONGJA  26 non-null     object 
    dtypes: float64(1), object(13)
    memory usage: 3.0+ KB





    0     합계
    1    종로구
    2     중구
    3    용산구
    4    성동구
    Name: JACHIGU, dtype: object




```python
condition = sgg_pop_df['JACHIGU'] != '합계'
sgg_pop_df_select = sgg_pop_df[condition]
sgg_pop_df_select.head()
```




<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }
    
    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>GIGAN</th>
      <th>JACHIGU</th>
      <th>SEDAE</th>
      <th>GYE_1</th>
      <th>NAMJA_1</th>
      <th>YEOJA_1</th>
      <th>GYE_2</th>
      <th>NAMJA_2</th>
      <th>YEOJA_2</th>
      <th>GYE_3</th>
      <th>NAMJA_3</th>
      <th>YEOJA_3</th>
      <th>SEDAEDANGINGU</th>
      <th>N_65SEISANGGORYEONGJA</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>1</th>
      <td>2020.3/4</td>
      <td>종로구</td>
      <td>74,861</td>
      <td>159,842</td>
      <td>77,391</td>
      <td>82,451</td>
      <td>149,952</td>
      <td>73,024</td>
      <td>76,928</td>
      <td>9,890</td>
      <td>4,367</td>
      <td>5,523</td>
      <td>2.00</td>
      <td>28,396</td>
    </tr>
    <tr>
      <th>2</th>
      <td>2020.3/4</td>
      <td>중구</td>
      <td>63,594</td>
      <td>135,321</td>
      <td>66,193</td>
      <td>69,128</td>
      <td>125,800</td>
      <td>61,526</td>
      <td>64,274</td>
      <td>9,521</td>
      <td>4,667</td>
      <td>4,854</td>
      <td>1.98</td>
      <td>24,265</td>
    </tr>
    <tr>
      <th>3</th>
      <td>2020.3/4</td>
      <td>용산구</td>
      <td>112,451</td>
      <td>244,953</td>
      <td>119,074</td>
      <td>125,879</td>
      <td>229,786</td>
      <td>110,604</td>
      <td>119,182</td>
      <td>15,167</td>
      <td>8,470</td>
      <td>6,697</td>
      <td>2.04</td>
      <td>39,995</td>
    </tr>
    <tr>
      <th>4</th>
      <td>2020.3/4</td>
      <td>성동구</td>
      <td>136,096</td>
      <td>302,695</td>
      <td>147,582</td>
      <td>155,113</td>
      <td>295,591</td>
      <td>144,444</td>
      <td>151,147</td>
      <td>7,104</td>
      <td>3,138</td>
      <td>3,966</td>
      <td>2.17</td>
      <td>45,372</td>
    </tr>
    <tr>
      <th>5</th>
      <td>2020.3/4</td>
      <td>광진구</td>
      <td>166,857</td>
      <td>361,923</td>
      <td>174,077</td>
      <td>187,846</td>
      <td>348,064</td>
      <td>168,095</td>
      <td>179,969</td>
      <td>13,859</td>
      <td>5,982</td>
      <td>7,877</td>
      <td>2.09</td>
      <td>50,047</td>
    </tr>
  </tbody>
</table>
</div>




```python
sgg_pop_df_final = sgg_pop_df_select[['JACHIGU', 'GYE_1']]
sgg_pop_df_final

sgg_pop_df_final.columns = ['시군구명', '주민등록인구']
sgg_pop_df_final.head()
```




<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }
    
    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>시군구명</th>
      <th>주민등록인구</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>1</th>
      <td>종로구</td>
      <td>159,842</td>
    </tr>
    <tr>
      <th>2</th>
      <td>중구</td>
      <td>135,321</td>
    </tr>
    <tr>
      <th>3</th>
      <td>용산구</td>
      <td>244,953</td>
    </tr>
    <tr>
      <th>4</th>
      <td>성동구</td>
      <td>302,695</td>
    </tr>
    <tr>
      <th>5</th>
      <td>광진구</td>
      <td>361,923</td>
    </tr>
  </tbody>
</table>
</div>




```python
sgg_pop_df_final.to_excel('./files/sgg_pop.xlsx', index=False)
```

#### 5.1.2.5. 서울시 시군구별 사업체 데이터 다운로드


```python
sgg_biz_df = pd.read_csv('./files/report2.txt', 
                        header = 2, 
                        sep = '\t')

sgg_biz_df.head()
```




<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }
    
    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>기간</th>
      <th>자치구</th>
      <th>동</th>
      <th>사업체수</th>
      <th>여성대표자</th>
      <th>계</th>
      <th>남</th>
      <th>여</th>
      <th>사업체수.1</th>
      <th>종사자수</th>
      <th>...</th>
      <th>사업체수.15</th>
      <th>종사자수.14</th>
      <th>사업체수.16</th>
      <th>종사자수.15</th>
      <th>사업체수.17</th>
      <th>종사자수.16</th>
      <th>사업체수.18</th>
      <th>종사자수.17</th>
      <th>사업체수.19</th>
      <th>종사자수.18</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>2018</td>
      <td>합계</td>
      <td>합계</td>
      <td>823,385</td>
      <td>279,711</td>
      <td>5,210,936</td>
      <td>2,878,227</td>
      <td>2,332,709</td>
      <td>30</td>
      <td>462</td>
      <td>...</td>
      <td>1,282</td>
      <td>140,121</td>
      <td>35,377</td>
      <td>346,219</td>
      <td>28,824</td>
      <td>378,366</td>
      <td>23,025</td>
      <td>91,104</td>
      <td>69,694</td>
      <td>191,423</td>
    </tr>
    <tr>
      <th>1</th>
      <td>2018</td>
      <td>종로구</td>
      <td>소계</td>
      <td>39,952</td>
      <td>13,442</td>
      <td>265,017</td>
      <td>152,717</td>
      <td>112,300</td>
      <td>3</td>
      <td>17</td>
      <td>...</td>
      <td>89</td>
      <td>15,658</td>
      <td>850</td>
      <td>13,504</td>
      <td>744</td>
      <td>15,888</td>
      <td>909</td>
      <td>6,227</td>
      <td>2,448</td>
      <td>7,672</td>
    </tr>
    <tr>
      <th>2</th>
      <td>2018</td>
      <td>종로구</td>
      <td>사직동</td>
      <td>3,541</td>
      <td>1,191</td>
      <td>49,536</td>
      <td>28,658</td>
      <td>20,878</td>
      <td>1</td>
      <td>14</td>
      <td>...</td>
      <td>19</td>
      <td>6,312</td>
      <td>86</td>
      <td>967</td>
      <td>103</td>
      <td>870</td>
      <td>95</td>
      <td>1,544</td>
      <td>252</td>
      <td>843</td>
    </tr>
    <tr>
      <th>3</th>
      <td>2018</td>
      <td>종로구</td>
      <td>삼청동</td>
      <td>712</td>
      <td>324</td>
      <td>4,577</td>
      <td>2,193</td>
      <td>2,384</td>
      <td>-</td>
      <td>-</td>
      <td>...</td>
      <td>4</td>
      <td>1,204</td>
      <td>14</td>
      <td>260</td>
      <td>7</td>
      <td>30</td>
      <td>17</td>
      <td>175</td>
      <td>24</td>
      <td>209</td>
    </tr>
    <tr>
      <th>4</th>
      <td>2018</td>
      <td>종로구</td>
      <td>부암동</td>
      <td>565</td>
      <td>240</td>
      <td>3,609</td>
      <td>1,706</td>
      <td>1,903</td>
      <td>-</td>
      <td>-</td>
      <td>...</td>
      <td>3</td>
      <td>59</td>
      <td>40</td>
      <td>1,424</td>
      <td>15</td>
      <td>148</td>
      <td>16</td>
      <td>40</td>
      <td>83</td>
      <td>362</td>
    </tr>
  </tbody>
</table>
<p>5 rows × 46 columns</p>
</div>




```python
condition = sgg_biz_df['동'] == '소계'
sgg_biz_df_selected = sgg_biz_df[condition]

sgg_biz_df_final = sgg_biz_df_selected[['자치구', '계','사업체수']]
sgg_biz_df_final.columns = ['시군구명', '종사자수','사업체수']
sgg_biz_df_final.head()
```




<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }
    
    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>시군구명</th>
      <th>종사자수</th>
      <th>사업체수</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>1</th>
      <td>종로구</td>
      <td>265,017</td>
      <td>39,952</td>
    </tr>
    <tr>
      <th>19</th>
      <td>중구</td>
      <td>390,530</td>
      <td>60,957</td>
    </tr>
    <tr>
      <th>35</th>
      <td>용산구</td>
      <td>141,216</td>
      <td>20,813</td>
    </tr>
    <tr>
      <th>52</th>
      <td>성동구</td>
      <td>174,819</td>
      <td>27,868</td>
    </tr>
    <tr>
      <th>70</th>
      <td>광진구</td>
      <td>127,879</td>
      <td>24,535</td>
    </tr>
  </tbody>
</table>
</div>




```python
sgg_biz_df_final = sgg_biz_df_final.reset_index(drop = True)
sgg_biz_df_final.head()
```




<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }
    
    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>시군구명</th>
      <th>종사자수</th>
      <th>사업체수</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>종로구</td>
      <td>265,017</td>
      <td>39,952</td>
    </tr>
    <tr>
      <th>1</th>
      <td>중구</td>
      <td>390,530</td>
      <td>60,957</td>
    </tr>
    <tr>
      <th>2</th>
      <td>용산구</td>
      <td>141,216</td>
      <td>20,813</td>
    </tr>
    <tr>
      <th>3</th>
      <td>성동구</td>
      <td>174,819</td>
      <td>27,868</td>
    </tr>
    <tr>
      <th>4</th>
      <td>광진구</td>
      <td>127,879</td>
      <td>24,535</td>
    </tr>
  </tbody>
</table>
</div>




```python
sgg_biz_df_final.to_excel('./files/sgg_biz.xlsx', index=False)
```

## 5.2. 데이터 전처리
### 5.2.1. 서울시 스타벅스 매장 목록, 인구, 사업체 데이터에 시군구명, 시순구코드 추가


```python
seoul_starbucks = pd.read_excel('./files/seoul_starbucks_list_class.xlsx')
seoul_starbucks.head()
```




<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }
    
    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>매장명</th>
      <th>위도</th>
      <th>경도</th>
      <th>매장타입</th>
      <th>주소</th>
      <th>전화번호</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>역삼아레나빌딩</td>
      <td>37.501087</td>
      <td>127.043069</td>
      <td>general</td>
      <td>서울특별시 강남구 언주로 425 (역삼동)</td>
      <td>1522-3232</td>
    </tr>
    <tr>
      <th>1</th>
      <td>논현역사거리</td>
      <td>37.510178</td>
      <td>127.022223</td>
      <td>general</td>
      <td>서울특별시 강남구 강남대로 538 (논현동)</td>
      <td>1522-3232</td>
    </tr>
    <tr>
      <th>2</th>
      <td>신사역성일빌딩</td>
      <td>37.514132</td>
      <td>127.020563</td>
      <td>general</td>
      <td>서울특별시 강남구 강남대로 584 (논현동)</td>
      <td>1522-3232</td>
    </tr>
    <tr>
      <th>3</th>
      <td>국기원사거리</td>
      <td>37.499517</td>
      <td>127.031495</td>
      <td>general</td>
      <td>서울특별시 강남구 테헤란로 125 (역삼동)</td>
      <td>1522-3232</td>
    </tr>
    <tr>
      <th>4</th>
      <td>대치재경빌딩R</td>
      <td>37.494668</td>
      <td>127.062583</td>
      <td>reserve</td>
      <td>서울특별시 강남구 남부순환로 2947 (대치동)</td>
      <td>1522-3232</td>
    </tr>
  </tbody>
</table>
</div>




```python
sgg_names = []

for address in seoul_starbucks['주소']:
    sgg = address.split()[1]
    sgg_names.append(sgg)
# type(sgg_names)

seoul_starbucks['시군구명'] = sgg_names
seoul_starbucks.head()
```




<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }
    
    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>매장명</th>
      <th>위도</th>
      <th>경도</th>
      <th>매장타입</th>
      <th>주소</th>
      <th>전화번호</th>
      <th>시군구명</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>역삼아레나빌딩</td>
      <td>37.501087</td>
      <td>127.043069</td>
      <td>general</td>
      <td>서울특별시 강남구 언주로 425 (역삼동)</td>
      <td>1522-3232</td>
      <td>강남구</td>
    </tr>
    <tr>
      <th>1</th>
      <td>논현역사거리</td>
      <td>37.510178</td>
      <td>127.022223</td>
      <td>general</td>
      <td>서울특별시 강남구 강남대로 538 (논현동)</td>
      <td>1522-3232</td>
      <td>강남구</td>
    </tr>
    <tr>
      <th>2</th>
      <td>신사역성일빌딩</td>
      <td>37.514132</td>
      <td>127.020563</td>
      <td>general</td>
      <td>서울특별시 강남구 강남대로 584 (논현동)</td>
      <td>1522-3232</td>
      <td>강남구</td>
    </tr>
    <tr>
      <th>3</th>
      <td>국기원사거리</td>
      <td>37.499517</td>
      <td>127.031495</td>
      <td>general</td>
      <td>서울특별시 강남구 테헤란로 125 (역삼동)</td>
      <td>1522-3232</td>
      <td>강남구</td>
    </tr>
    <tr>
      <th>4</th>
      <td>대치재경빌딩R</td>
      <td>37.494668</td>
      <td>127.062583</td>
      <td>reserve</td>
      <td>서울특별시 강남구 남부순환로 2947 (대치동)</td>
      <td>1522-3232</td>
      <td>강남구</td>
    </tr>
  </tbody>
</table>
</div>




```python
seoul_starbucks.to_excel('./files/seoul_starbucks_list.xlsx', index=False)
```

### 5.2.2. 스타벅스 분석 데이터 만들기


```python
import pandas as pd
import numpy as np
```


```python
seoul_sgg = pd.read_excel('./files/seoul_sgg_list.xlsx')
seoul_sgg.head()
```




<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }
    
    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>시군구코드</th>
      <th>시군구명</th>
      <th>위도</th>
      <th>경도</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>11320</td>
      <td>도봉구</td>
      <td>37.665861</td>
      <td>127.031767</td>
    </tr>
    <tr>
      <th>1</th>
      <td>11380</td>
      <td>은평구</td>
      <td>37.617612</td>
      <td>126.922700</td>
    </tr>
    <tr>
      <th>2</th>
      <td>11230</td>
      <td>동대문구</td>
      <td>37.583801</td>
      <td>127.050700</td>
    </tr>
    <tr>
      <th>3</th>
      <td>11590</td>
      <td>동작구</td>
      <td>37.496504</td>
      <td>126.944307</td>
    </tr>
    <tr>
      <th>4</th>
      <td>11545</td>
      <td>금천구</td>
      <td>37.460097</td>
      <td>126.900155</td>
    </tr>
  </tbody>
</table>
</div>




```python
seoul_starbucks = pd.read_excel('./files/seoul_starbucks_list.xlsx')
seoul_starbucks

seoul_sgg_count = seoul_starbucks.pivot_table(values = '매장명',
                                              index = '시군구명',
                                              aggfunc = 'count')
starbucks_sgg_count = seoul_sgg_count.reset_index(drop=False)
starbucks_sgg_count = starbucks_sgg_count.rename(columns = {'매장명':'스타벅스_매장수'})
starbucks_sgg_count

starbucks_sgg_count.to_excel('./files/starbuck_sgg_counts.xlsx', index = False)
starbucks_sgg_count.head()
```




<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }
    
    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>시군구명</th>
      <th>스타벅스_매장수</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>강남구</td>
      <td>88</td>
    </tr>
    <tr>
      <th>1</th>
      <td>강동구</td>
      <td>16</td>
    </tr>
    <tr>
      <th>2</th>
      <td>강북구</td>
      <td>6</td>
    </tr>
    <tr>
      <th>3</th>
      <td>강서구</td>
      <td>22</td>
    </tr>
    <tr>
      <th>4</th>
      <td>관악구</td>
      <td>11</td>
    </tr>
  </tbody>
</table>
</div>




```python
seoul_sgg = pd.merge(seoul_sgg, starbucks_sgg_count,
                    how = 'left', on = '시군구명')

seoul_sgg.head()
```




<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }
    
    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>시군구코드</th>
      <th>시군구명</th>
      <th>위도</th>
      <th>경도</th>
      <th>스타벅스_매장수</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>11320</td>
      <td>도봉구</td>
      <td>37.665861</td>
      <td>127.031767</td>
      <td>3</td>
    </tr>
    <tr>
      <th>1</th>
      <td>11380</td>
      <td>은평구</td>
      <td>37.617612</td>
      <td>126.922700</td>
      <td>8</td>
    </tr>
    <tr>
      <th>2</th>
      <td>11230</td>
      <td>동대문구</td>
      <td>37.583801</td>
      <td>127.050700</td>
      <td>9</td>
    </tr>
    <tr>
      <th>3</th>
      <td>11590</td>
      <td>동작구</td>
      <td>37.496504</td>
      <td>126.944307</td>
      <td>11</td>
    </tr>
    <tr>
      <th>4</th>
      <td>11545</td>
      <td>금천구</td>
      <td>37.460097</td>
      <td>126.900155</td>
      <td>11</td>
    </tr>
  </tbody>
</table>
</div>




```python
seoul_sgg_pop = pd.read_excel('./files/sgg_pop.xlsx')
seoul_sgg_pop.head()
```




<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }
    
    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>시군구명</th>
      <th>주민등록인구</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>종로구</td>
      <td>159,842</td>
    </tr>
    <tr>
      <th>1</th>
      <td>중구</td>
      <td>135,321</td>
    </tr>
    <tr>
      <th>2</th>
      <td>용산구</td>
      <td>244,953</td>
    </tr>
    <tr>
      <th>3</th>
      <td>성동구</td>
      <td>302,695</td>
    </tr>
    <tr>
      <th>4</th>
      <td>광진구</td>
      <td>361,923</td>
    </tr>
  </tbody>
</table>
</div>




```python
seoul_sgg = pd.merge(seoul_sgg, seoul_sgg_pop,
                    how = 'left', on = '시군구명')
seoul_sgg.head()
```




<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }
    
    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>시군구코드</th>
      <th>시군구명</th>
      <th>위도</th>
      <th>경도</th>
      <th>스타벅스_매장수</th>
      <th>주민등록인구</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>11320</td>
      <td>도봉구</td>
      <td>37.665861</td>
      <td>127.031767</td>
      <td>3</td>
      <td>329,300</td>
    </tr>
    <tr>
      <th>1</th>
      <td>11380</td>
      <td>은평구</td>
      <td>37.617612</td>
      <td>126.922700</td>
      <td>8</td>
      <td>485,842</td>
    </tr>
    <tr>
      <th>2</th>
      <td>11230</td>
      <td>동대문구</td>
      <td>37.583801</td>
      <td>127.050700</td>
      <td>9</td>
      <td>358,679</td>
    </tr>
    <tr>
      <th>3</th>
      <td>11590</td>
      <td>동작구</td>
      <td>37.496504</td>
      <td>126.944307</td>
      <td>11</td>
      <td>404,617</td>
    </tr>
    <tr>
      <th>4</th>
      <td>11545</td>
      <td>금천구</td>
      <td>37.460097</td>
      <td>126.900155</td>
      <td>11</td>
      <td>249,641</td>
    </tr>
  </tbody>
</table>
</div>




```python
seoul_sgg_biz = pd.read_excel('./files/sgg_biz.xlsx')
seoul_sgg_biz.head()
```




<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }
    
    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>시군구명</th>
      <th>종사자수</th>
      <th>사업체수</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>종로구</td>
      <td>265,017</td>
      <td>39,952</td>
    </tr>
    <tr>
      <th>1</th>
      <td>중구</td>
      <td>390,530</td>
      <td>60,957</td>
    </tr>
    <tr>
      <th>2</th>
      <td>용산구</td>
      <td>141,216</td>
      <td>20,813</td>
    </tr>
    <tr>
      <th>3</th>
      <td>성동구</td>
      <td>174,819</td>
      <td>27,868</td>
    </tr>
    <tr>
      <th>4</th>
      <td>광진구</td>
      <td>127,879</td>
      <td>24,535</td>
    </tr>
  </tbody>
</table>
</div>




```python
seoul_sgg = pd.merge(seoul_sgg, seoul_sgg_biz,
                    how = 'left', on = '시군구명')
seoul_sgg.head()
```




<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }
    
    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>시군구코드</th>
      <th>시군구명</th>
      <th>위도</th>
      <th>경도</th>
      <th>스타벅스_매장수</th>
      <th>주민등록인구</th>
      <th>종사자수</th>
      <th>사업체수</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>11320</td>
      <td>도봉구</td>
      <td>37.665861</td>
      <td>127.031767</td>
      <td>3</td>
      <td>329,300</td>
      <td>74,314</td>
      <td>18,894</td>
    </tr>
    <tr>
      <th>1</th>
      <td>11380</td>
      <td>은평구</td>
      <td>37.617612</td>
      <td>126.922700</td>
      <td>8</td>
      <td>485,842</td>
      <td>90,049</td>
      <td>24,873</td>
    </tr>
    <tr>
      <th>2</th>
      <td>11230</td>
      <td>동대문구</td>
      <td>37.583801</td>
      <td>127.050700</td>
      <td>9</td>
      <td>358,679</td>
      <td>140,748</td>
      <td>31,878</td>
    </tr>
    <tr>
      <th>3</th>
      <td>11590</td>
      <td>동작구</td>
      <td>37.496504</td>
      <td>126.944307</td>
      <td>11</td>
      <td>404,617</td>
      <td>112,564</td>
      <td>19,916</td>
    </tr>
    <tr>
      <th>4</th>
      <td>11545</td>
      <td>금천구</td>
      <td>37.460097</td>
      <td>126.900155</td>
      <td>11</td>
      <td>249,641</td>
      <td>234,012</td>
      <td>32,472</td>
    </tr>
  </tbody>
</table>
</div>




```python
seoul_sgg.to_excel('./files/seoul_sgg_stat.xlsx', index = False)
```

## 5.3. 데이터 시각화
### 5.3.1. 스타벅스 매장분포 시각화


```python
import folium
import json
```


```python
seoul_starbucks = pd.read_excel('./files/seoul_starbucks_list.xlsx')
seoul_starbucks.head()
```




<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }
    
    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>매장명</th>
      <th>위도</th>
      <th>경도</th>
      <th>매장타입</th>
      <th>주소</th>
      <th>전화번호</th>
      <th>시군구명</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>역삼아레나빌딩</td>
      <td>37.501087</td>
      <td>127.043069</td>
      <td>general</td>
      <td>서울특별시 강남구 언주로 425 (역삼동)</td>
      <td>1522-3232</td>
      <td>강남구</td>
    </tr>
    <tr>
      <th>1</th>
      <td>논현역사거리</td>
      <td>37.510178</td>
      <td>127.022223</td>
      <td>general</td>
      <td>서울특별시 강남구 강남대로 538 (논현동)</td>
      <td>1522-3232</td>
      <td>강남구</td>
    </tr>
    <tr>
      <th>2</th>
      <td>신사역성일빌딩</td>
      <td>37.514132</td>
      <td>127.020563</td>
      <td>general</td>
      <td>서울특별시 강남구 강남대로 584 (논현동)</td>
      <td>1522-3232</td>
      <td>강남구</td>
    </tr>
    <tr>
      <th>3</th>
      <td>국기원사거리</td>
      <td>37.499517</td>
      <td>127.031495</td>
      <td>general</td>
      <td>서울특별시 강남구 테헤란로 125 (역삼동)</td>
      <td>1522-3232</td>
      <td>강남구</td>
    </tr>
    <tr>
      <th>4</th>
      <td>대치재경빌딩R</td>
      <td>37.494668</td>
      <td>127.062583</td>
      <td>reserve</td>
      <td>서울특별시 강남구 남부순환로 2947 (대치동)</td>
      <td>1522-3232</td>
      <td>강남구</td>
    </tr>
  </tbody>
</table>
</div>




```python
add = seoul_starbucks.loc[0, '주소']
type(add)

address = '<pre>' + add + '</pre>'
address
```




    '<pre>서울특별시 강남구 언주로 425 (역삼동)</pre>'




```python
tiles = ['stamenwatercolor', 'cartodbpositron', 
         'openstreetmap', 'stamenterrain']

starbucks_map = folium.Map(location = [37.573050, 126.979189],
                          tiles = 'StamenTerrain',
                          zoom_start = 11)



for idx in seoul_starbucks.index:
    
    lat = seoul_starbucks.loc[idx, '위도']
    lng = seoul_starbucks.loc[idx, '경도']
    store_type = seoul_starbucks.loc[idx, '매장타입']
    names = seoul_starbucks.loc[idx, '매장명']
    address = '<pre>'+ seoul_starbucks.loc[idx, '주소'] + '</pre>'
    
    
    fillColor = ''
    if store_type == 'general':
        fillColor = "gray"
        
    elif store_type == "reserve":
        fillColor = "blue"
        
    elif store_type == 'generalDT':
        fillColor = 'red'
        
        
 
    folium.CircleMarker(
    location = [lat, lng],
    color = fillColor,
    popup = address,
    tooltip = names,
    radius = 4,
    weight = 1,
    fill = True,
    fill_color = fillColor,
    fill_opacity = 0.5).add_to(starbucks_map)
    
    
starbucks_map
```

### 5.3.2. 시군구별 스타벅스 매장 수 시각화


```python
seoul_sgg_stat = pd.read_excel('./files/seoul_sgg_stat.xlsx')
seoul_sgg_stat.head()
```




<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }
    
    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>시군구코드</th>
      <th>시군구명</th>
      <th>위도</th>
      <th>경도</th>
      <th>스타벅스_매장수</th>
      <th>주민등록인구</th>
      <th>종사자수</th>
      <th>사업체수</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>11320</td>
      <td>도봉구</td>
      <td>37.665861</td>
      <td>127.031767</td>
      <td>3</td>
      <td>329,300</td>
      <td>74,314</td>
      <td>18,894</td>
    </tr>
    <tr>
      <th>1</th>
      <td>11380</td>
      <td>은평구</td>
      <td>37.617612</td>
      <td>126.922700</td>
      <td>8</td>
      <td>485,842</td>
      <td>90,049</td>
      <td>24,873</td>
    </tr>
    <tr>
      <th>2</th>
      <td>11230</td>
      <td>동대문구</td>
      <td>37.583801</td>
      <td>127.050700</td>
      <td>9</td>
      <td>358,679</td>
      <td>140,748</td>
      <td>31,878</td>
    </tr>
    <tr>
      <th>3</th>
      <td>11590</td>
      <td>동작구</td>
      <td>37.496504</td>
      <td>126.944307</td>
      <td>11</td>
      <td>404,617</td>
      <td>112,564</td>
      <td>19,916</td>
    </tr>
    <tr>
      <th>4</th>
      <td>11545</td>
      <td>금천구</td>
      <td>37.460097</td>
      <td>126.900155</td>
      <td>11</td>
      <td>249,641</td>
      <td>234,012</td>
      <td>32,472</td>
    </tr>
  </tbody>
</table>
</div>




```python
sgg_geojson_file_path = './maps/seoul_sgg.geojson'
seoul_sgg_geo = json.load(open(sgg_geojson_file_path, encoding = 'utf-8'))
seoul_sgg_geo['features'][0]['properties']
```




    {'SIG_CD': '11320',
     'SIG_KOR_NM': '도봉구',
     'SIG_ENG_NM': 'Dobong-gu',
     'ESRI_PK': 0,
     'SHAPE_AREA': 0.00210990544544,
     'SHAPE_LEN': 0.239901251347}




```python
starbucks_bubble = folium.Map(
                    location = [37.573050, 126.979189],
                    tiles = 'CartoDB positron',
                    zoom_start = 11)



def style_function(feature):
    return{
        'opacity': 0.7,
        'weight': 1,
        'color':'red',
        'fillOpacity':0.1,
        'dashArray': '5, 5'
    }

folium.GeoJson(seoul_sgg_geo,
              style_function = style_function
              ).add_to(starbucks_bubble)

starbucks_bubble

starbucks_mean = seoul_sgg_stat['스타벅스_매장수'].mean()


for idx in seoul_sgg_stat.index:
    
    lat = seoul_sgg_stat.loc[idx, '위도']
    lng = seoul_sgg_stat.loc[idx, '경도']
    count = seoul_sgg_stat.loc[idx, '스타벅스_매장수']

    
    
    
    if count > starbucks_mean:
        fillColor = 'red'
        
    else:
        
        fillColor = 'blue'
    
              
 
    folium.CircleMarker(
    location = [lat, lng],
    color = '#FFFF00',
    radius = int(count/2),
    weight = 1,
    fill = True,
    fill_color = fillColor,
    fill_opacity = 0.5).add_to(starbucks_bubble)
    
    
starbucks_bubble
```


```python
sgg_geojson_file_path = './maps/seoul_sgg.geojson'
seoul_sgg_geo_2 = json.load(open(sgg_geojson_file_path, encoding = 'utf-8'))

starbucks_choropleth =folium.Map(width = 400, height = 400,
                                location=[37.573050, 126.979189],
                                tiles = 'CartoDB positron',
                                zoom_start = 11)

# starbucks_choropleth

folium.Choropleth(seoul_sgg_geo_2,
                 data = seoul_sgg_stat,
                 columns = ['시군구명', '스타벅스_매장수'],
                 key_on = 'properties.SIG_KOR_NM',
                  fill_color = 'YlOrRd',
                  fill_opacity = 0.5,
                  line_opacity = 0.7).add_to(starbucks_choropleth)

starbucks_choropleth
```

### 5.3.3. 스타벅스 매장 수와 인구수 비교


```python
seoul_sgg_stat = pd.read_excel('./files/seoul_sgg_stat.xlsx')
seoul_sgg_stat['주민등록인구'] = seoul_sgg_stat['주민등록인구'].str.replace(',', "").astype(np.int32)
seoul_sgg_stat['사업체수'] = seoul_sgg_stat['사업체수'].str.replace(',', "").astype(np.int32)
seoul_sgg_stat['종사자수'] = seoul_sgg_stat['종사자수'].str.replace(',', "").astype(np.int32)

seoul_sgg_stat['인구당_매장수'] = (seoul_sgg_stat['스타벅스_매장수']/\
seoul_sgg_stat['주민등록인구'])

seoul_sgg_stat['사업체수_매장수'] = (seoul_sgg_stat['스타벅스_매장수']/\
seoul_sgg_stat['사업체수'])

seoul_sgg_stat['종사자수_매장수'] = (seoul_sgg_stat['스타벅스_매장수']/\
seoul_sgg_stat['종사자수'])

seoul_sgg_stat['인구당_매장수_norm'] = seoul_sgg_stat['인구당_매장수']/\
seoul_sgg_stat['인구당_매장수'].max()

seoul_sgg_stat['사업체수_매장수_norm'] = (seoul_sgg_stat['사업체수_매장수']/\
seoul_sgg_stat['사업체수_매장수'].max())

seoul_sgg_stat['종사자수_매장수_norm'] = (seoul_sgg_stat['종사자수_매장수']/\
seoul_sgg_stat['종사자수_매장수'].max())

seoul_sgg_stat.info()
seoul_sgg_stat.head()
```

    <class 'pandas.core.frame.DataFrame'>
    RangeIndex: 25 entries, 0 to 24
    Data columns (total 14 columns):
     #   Column         Non-Null Count  Dtype  
    ---  ------         --------------  -----  
     0   시군구코드          25 non-null     int64  
     1   시군구명           25 non-null     object 
     2   위도             25 non-null     float64
     3   경도             25 non-null     float64
     4   스타벅스_매장수       25 non-null     int64  
     5   주민등록인구         25 non-null     int32  
     6   종사자수           25 non-null     int32  
     7   사업체수           25 non-null     int32  
     8   인구당_매장수        25 non-null     float64
     9   사업체수_매장수       25 non-null     float64
     10  종사자수_매장수       25 non-null     float64
     11  인구당_매장수_norm   25 non-null     float64
     12  사업체수_매장수_norm  25 non-null     float64
     13  종사자수_매장수_norm  25 non-null     float64
    dtypes: float64(8), int32(3), int64(2), object(1)
    memory usage: 2.6+ KB





<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }
    
    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>시군구코드</th>
      <th>시군구명</th>
      <th>위도</th>
      <th>경도</th>
      <th>스타벅스_매장수</th>
      <th>주민등록인구</th>
      <th>종사자수</th>
      <th>사업체수</th>
      <th>인구당_매장수</th>
      <th>사업체수_매장수</th>
      <th>종사자수_매장수</th>
      <th>인구당_매장수_norm</th>
      <th>사업체수_매장수_norm</th>
      <th>종사자수_매장수_norm</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>11320</td>
      <td>도봉구</td>
      <td>37.665861</td>
      <td>127.031767</td>
      <td>3</td>
      <td>329300</td>
      <td>74314</td>
      <td>18894</td>
      <td>0.000009</td>
      <td>0.000159</td>
      <td>0.000040</td>
      <td>0.023260</td>
      <td>0.128780</td>
      <td>0.221001</td>
    </tr>
    <tr>
      <th>1</th>
      <td>11380</td>
      <td>은평구</td>
      <td>37.617612</td>
      <td>126.922700</td>
      <td>8</td>
      <td>485842</td>
      <td>90049</td>
      <td>24873</td>
      <td>0.000016</td>
      <td>0.000322</td>
      <td>0.000089</td>
      <td>0.042042</td>
      <td>0.260863</td>
      <td>0.486357</td>
    </tr>
    <tr>
      <th>2</th>
      <td>11230</td>
      <td>동대문구</td>
      <td>37.583801</td>
      <td>127.050700</td>
      <td>9</td>
      <td>358679</td>
      <td>140748</td>
      <td>31878</td>
      <td>0.000025</td>
      <td>0.000282</td>
      <td>0.000064</td>
      <td>0.064066</td>
      <td>0.228983</td>
      <td>0.350062</td>
    </tr>
    <tr>
      <th>3</th>
      <td>11590</td>
      <td>동작구</td>
      <td>37.496504</td>
      <td>126.944307</td>
      <td>11</td>
      <td>404617</td>
      <td>112564</td>
      <td>19916</td>
      <td>0.000027</td>
      <td>0.000552</td>
      <td>0.000098</td>
      <td>0.069413</td>
      <td>0.447963</td>
      <td>0.534980</td>
    </tr>
    <tr>
      <th>4</th>
      <td>11545</td>
      <td>금천구</td>
      <td>37.460097</td>
      <td>126.900155</td>
      <td>11</td>
      <td>249641</td>
      <td>234012</td>
      <td>32472</td>
      <td>0.000044</td>
      <td>0.000339</td>
      <td>0.000047</td>
      <td>0.112504</td>
      <td>0.274748</td>
      <td>0.257335</td>
    </tr>
  </tbody>
</table>
</div>




```python
sgg_geojson_file_path = './maps/seoul_sgg.geojson'
seoul_sgg_geo_2 = json.load(open(sgg_geojson_file_path, encoding = 'utf-8'))


starbucks_choropleth =folium.Map(width = 400, height = 400,
                                location=[37.573050, 126.979189],
                                tiles = 'CartoDB positron',
                                zoom_start = 11)

# starbucks_choropleth

folium.Choropleth(seoul_sgg_geo_2,
                 data = seoul_sgg_stat,
                 columns = ['시군구명', '사업체수_매장수'],
                 key_on = 'properties.SIG_KOR_NM',
                  fill_color = 'YlOrRd',
                  fill_opacity = 0.5,
                  line_opacity = 0.7).add_to(starbucks_choropleth)

starbucks_choropleth
```


```python
sgg_geojson_file_path = './maps/seoul_sgg.geojson'
seoul_sgg_geo_2 = json.load(open(sgg_geojson_file_path, encoding = 'utf-8'))


starbucks_choropleth =folium.Map(width = 400, height = 400,
                                location=[37.573050, 126.979189],
                                tiles = 'CartoDB positron',
                                zoom_start = 11)

# starbucks_choropleth

folium.Choropleth(seoul_sgg_geo_2,
                 data = seoul_sgg_stat,
                 columns = ['시군구명', '종사자수_매장수'],
                 key_on = 'properties.SIG_KOR_NM',
                  fill_color = 'YlOrRd',
                  fill_opacity = 0.5,
                  line_opacity = 0.7).add_to(starbucks_choropleth)

starbucks_choropleth
```


```python
seoul_sgg_stat['인구당_매장수'] = (seoul_sgg_stat['스타벅스_매장수']/\
seoul_sgg_stat['주민등록인구'])
seoul_sgg_stat['인구당_매장수_norm'] = seoul_sgg_stat['인구당_매장수']/\
seoul_sgg_stat['인구당_매장수'].max()

seoul_sgg_stat['사업체수_매장수_norm'] = (seoul_sgg_stat['사업체수_매장수']/\
seoul_sgg_stat['사업체수_매장수'].max())

seoul_sgg_stat['종사자수_매장수_norm'] = (seoul_sgg_stat['종사자수_매장수']/\
seoul_sgg_stat['종사자수_매장수'].max())
```


```python
sgg_geojson_file_path = './maps/seoul_sgg.geojson'
seoul_sgg_geo_2 = json.load(open(sgg_geojson_file_path, encoding = 'utf-8'))


starbucks_choropleth =folium.Map(width = 400, height = 400,
                                location=[37.573050, 126.979189],
                                tiles = 'CartoDB positron',
                                zoom_start = 11)

# starbucks_choropleth

folium.Choropleth(seoul_sgg_geo_2,
                 data = seoul_sgg_stat,
                 columns = ['시군구명', '인구당_매장수_norm'],
                 key_on = 'properties.SIG_KOR_NM',
                  fill_color = 'YlOrRd',
                  fill_opacity = 0.5,
                  line_opacity = 0.7).add_to(starbucks_choropleth)

starbucks_choropleth
```

### 5.3.4. 스타벅스 매장 수와 사업체 수 비교


```python
sgg_geojson_file_path = './maps/seoul_sgg.geojson'
seoul_sgg_geo_2 = json.load(open(sgg_geojson_file_path, encoding = 'utf-8'))


starbucks_choropleth =folium.Map(width = 400, height = 400,
                                location=[37.573050, 126.979189],
                                tiles = 'CartoDB positron',
                                zoom_start = 11)

# starbucks_choropleth

folium.Choropleth(seoul_sgg_geo_2,
                 data = seoul_sgg_stat,
                 columns = ['시군구명', '사업체수_매장수_norm'],
                 key_on = 'properties.SIG_KOR_NM',
                  fill_color = 'YlOrRd',
                  fill_opacity = 0.5,
                  line_opacity = 0.7).add_to(starbucks_choropleth)

starbucks_choropleth
```
